#!/bin/bash

INFILE="/home/marc/msf_http+s_targets.lst"
HOSTIP_FILE="/home/marc/all_names.lst"

cat ${INFILE} | while read line; do
    IP="$(echo $line | cut -d ':' -f2 | tr -d '/')"
    IPEQUALS=$IP'='
    HOST=$(cat ${HOSTIP_FILE} | tr ' ' '=' | grep $IPEQUALS | cut -d '=' -f2)
    if [ ${#HOST} -gt 1 ]; then
       NEWLINE="$(echo $line | sed "s/$IP/$HOST/")"
    else
	NEWLINE=$line
    fi
    echo $NEWLINE
done

